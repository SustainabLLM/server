<!doctype html>
<html>
<head>
    <title>{{ search_engine_name }}</title>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <script>
        // Make sure this code gets executed after the DOM is loaded.
        document.querySelector("#queryArea").addEventListener("keyup", event => {
            if (event.key !== "Enter") return; // Use `.key` instead.
            document.querySelector("#searchButton").click(); // Things you want to do.
            event.preventDefault(); // No need to `return false;`.
        });
    </script>
</head>
<body>
<div style="display: flex; flex-direction: column; justify-items: center; width: 100%">
    <div id='title'><img src="{{ url_for('static', filename='Logo.svg') }}" alt="SustainabLLM"/></div>

    <div id="content" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <form class="searchForm" method='GET'>
            <div class="chat-input-area overflow-hidden" style="width: 100%">
                <div class="inputRow row">
                    <div class="chat-inputs-area-inner">
                        <div class="row chat-inputs-container d-flex align-items-center">
                            <textarea id="queryArea" class="col-11" name='query'
                                      placeholder="Ask your question here"  style="min-height: 1rem">{{ query }}</textarea>
                            <button class="col-1 btn"><i class="fa fa-paper-plane" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-search" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                </svg>
                            </i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!--    </div>-->
            <!--            <textarea id="queryArea" class="form-control" name='query' value='{{ query }}' rows="auto"> </textarea>-->
            <!--            <button id="searchButton" class="form-control btn btn-success search-button"-->
            <!--                    style="border-width: 0; width: 10rem">-->
            <!--                Search-->
            <!--            </button>-->
        </form>

        <hr style='border: none; border-bottom: 1px solid lightgrey;'>

        {% if query != '' %}
        <div style='font-size:16px; text-align: right; padding-right: 10px;'>
            Found answer in {{ time }} seconds.
        </div>

        <div style='display: flex; flex-direction: column; align-items: flex-start; min-width: 80%'>
            <label for="answer"> Answer: </label>
            <div class='answer' id="answer">
                {{answer}}
            </div>

            <label for="sources">Sources: </label>
            <div id="sources">
                {% for source in sources %}
                <a class='source' href="{{source}}">
                    {{source}}
                </a>
                {% endfor %}
            </div>
        </div>

        {% endif %}
    </div>
</div>

</body>
</html>